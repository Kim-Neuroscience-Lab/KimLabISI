{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ISI Macroscope Generation Parameters",
  "description": "JSON schema for stimulus generation parameters following ADR-0007 parameter separation",
  "type": "object",
  "properties": {
    "spatial_config": {
      "type": "object",
      "title": "Spatial Configuration",
      "description": "Monitor setup and visual field geometry parameters",
      "properties": {
        "monitor_distance_cm": {
          "type": "number",
          "minimum": 5.0,
          "maximum": 20.0,
          "default": 10.0,
          "description": "Distance from mouse eye to monitor in cm (Marshel et al.: 10cm)"
        },
        "monitor_angle_degrees": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 45.0,
          "default": 20.0,
          "description": "Monitor angle inward toward nose in degrees (Marshel et al.: 20�)"
        },
        "monitor_height_degrees": {
          "type": "number",
          "minimum": -15.0,
          "maximum": 45.0,
          "default": 30.0,
          "description": "Horizontal monitor angle in degrees"
        },
        "monitor_roll_degrees": {
          "type": "number",
          "minimum": -10.0,
          "maximum": 10.0,
          "default": 0.0,
          "description": "Monitor roll rotation in degrees"
        },
        "screen_width_cm": {
          "type": "number",
          "minimum": 10.0,
          "maximum": 100.0,
          "default": 60.96,
          "description": "Physical screen width in cm"
        },
        "screen_height_cm": {
          "type": "number",
          "minimum": 10.0,
          "maximum": 100.0,
          "default": 36.195,
          "description": "Physical screen height in cm"
        },
        "screen_width_pixels": {
          "type": "integer",
          "minimum": 640,
          "maximum": 4096,
          "default": 2560,
          "description": "Screen resolution width in pixels"
        },
        "screen_height_pixels": {
          "type": "integer",
          "minimum": 480,
          "maximum": 4096,
          "default": 1440,
          "description": "Screen resolution height in pixels"
        }
      },
      "required": [
        "monitor_distance_cm",
        "monitor_angle_degrees",
        "screen_width_cm",
        "screen_height_cm",
        "screen_width_pixels",
        "screen_height_pixels"
      ],
      "additionalProperties": false
    },
    "stimulus_params": {
      "type": "object",
      "title": "Stimulus Generation Parameters",
      "description": "Parameters affecting visual content of generated stimuli",
      "properties": {
        "bar_width_degrees": {
          "type": "number",
          "minimum": 1.0,
          "maximum": 45.0,
          "default": 20.0,
          "description": "Bar width in degrees of visual angle (Marshel et al.: 20�)"
        },
        "drift_speed_degrees_per_sec": {
          "type": "number",
          "minimum": 1.0,
          "maximum": 50.0,
          "default": 9.0,
          "description": "Bar drift speed in degrees per second (Marshel et al.: 8.5-9.5�/s)"
        },
        "checkerboard_size_degrees": {
          "type": "number",
          "minimum": 1.0,
          "maximum": 50.0,
          "default": 25.0,
          "description": "Checkerboard square size in degrees (Marshel et al.: 25�)"
        },
        "flicker_frequency_hz": {
          "type": "number",
          "minimum": 1.0,
          "maximum": 30.0,
          "default": 6.0,
          "description": "Counter-phase flicker frequency in Hz (Marshel et al.: 166ms period H 6Hz)"
        },
        "contrast": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.5,
          "description": "Stimulus contrast (0-1, full black to white)"
        },
        "background_luminance": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.5,
          "description": "Background luminance (0-1)"
        },
        "frame_rate_fps": {
          "type": "number",
          "minimum": 1.0,
          "maximum": 120.0,
          "default": 60.0,
          "description": "Frame rate in frames per second"
        }
      },
      "required": [
        "bar_width_degrees",
        "drift_speed_degrees_per_sec",
        "checkerboard_size_degrees",
        "flicker_frequency_hz",
        "contrast",
        "background_luminance"
      ],
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "title": "Parameter Metadata",
      "description": "Metadata for parameter tracking and validation",
      "properties": {
        "created_timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "When parameters were created"
        },
        "version": {
          "type": "string",
          "default": "1.0",
          "description": "Parameter schema version"
        },
        "generation_hash": {
          "type": "string",
          "pattern": "^[a-f0-9]{64}$",
          "description": "SHA256 hash for generation parameter matching"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["spatial_config", "stimulus_params"],
  "additionalProperties": false,
  "examples": [
    {
      "spatial_config": {
        "monitor_distance_cm": 10.0,
        "monitor_angle_degrees": 20.0,
        "monitor_height_degrees": 30.0,
        "monitor_roll_degrees": 0.0,
        "screen_width_cm": 60.96,
        "screen_height_cm": 36.195,
        "screen_width_pixels": 2560,
        "screen_height_pixels": 1440
      },
      "stimulus_params": {
        "bar_width_degrees": 20.0,
        "drift_speed_degrees_per_sec": 9.0,
        "checkerboard_size_degrees": 25.0,
        "flicker_frequency_hz": 6.0,
        "frame_rate_fps": 60.0,
        "contrast": 0.5,
        "background_luminance": 0.5
      },
      "metadata": {
        "version": "1.0"
      }
    }
  ]
}